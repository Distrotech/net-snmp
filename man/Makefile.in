SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
@SET_MAKE@

prefix = @prefix@
exec_prefix = @exec_prefix@
mandir = $(prefix)/man
man1dir = $(mandir)/man1
man3dir = $(mandir)/man3
man5dir = $(mandir)/man5
man8dir = $(mandir)/man8
bindir = $(exec_prefix)/bin
libdir = $(exec_prefix)/lib
snmplibdir = $(prefix)/lib/snmp

INSTALL = @INSTALL@

SED = @SED@

MAN1 = snmpget.1 snmpset.1 snmpwalk.1 snmpbulkwalk.1 snmpgetnext.1 snmptest.1 snmpd.1 snmpnetstat.1 snmptranslate.1 snmpstatus.1
MAN3 = snmp_api.3
MAN5 = variables.5 snmpd.conf.5
MAN8 = snmptrapd.8

TARGETS = snmpd.conf.5 snmpd.1

all: $(TARGETS)

snmpd.conf.5: snmpd.conf.5.def ../sedscript
	cat snmpd.conf.5.def | $(SED) -f ../sedscript | $(SED) -e "s#PREFIX#$(prefix)#g" > snmpd.conf.5

snmpd.1: snmpd.1.def ../sedscript
	cat snmpd.1.def | $(SED) -f ../sedscript | $(SED) -e "s#PREFIX#$(prefix)#g" > snmpd.1
	
install:  installdirs $(MAN1) $(MAN3) $(MAN5) $(MAN8)
	@for i in $(MAN1) ; do $(INSTALL) $$i $(man1dir) ; echo "install:  installed $$i in $(man1dir)" ; done
	@for i in $(MAN3) ; do $(INSTALL) $$i $(man3dir) ; echo "install:  installed $$i in $(man3dir)" ; done
	@for i in $(MAN5) ; do $(INSTALL) $$i $(man5dir) ; echo "install:  installed $$i in $(man5dir)" ; done
	@for i in $(MAN8) ; do $(INSTALL) $$i $(man8dir) ; echo "install:  installed $$i in $(man8dir)" ; done
	
installdirs:
	@$(SHELL) $(srcdir)/../mkinstalldirs $(man1dir) $(man3dir) $(man5dir) $(man8dir)

clean:
	rm -f $(TARGETS)
